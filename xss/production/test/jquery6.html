<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License
Name       : Refillable  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20120325
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Refillable   by Free CSS Templates</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<style type="text/css">
@import "gallery.css";
</style>
</head>
<body>
<div id="wrapper">
	<div id="header">
		<div id="logo">
			<h1><a href="#">Refillable </a></h1>
			<p> design by <a href="http://www.freecsstemplates.org/">Free CSS Templates</a></p>
		</div>
	</div>
	<!-- end #header -->
	<div id="menu">
		<ul>
			<li class="current_page_item"><a href="#">Home</a></li>
			<li><a href="#">Blog</a></li>
			<li><a href="#">Photos</a></li>
			<li><a href="#">About</a></li>
			<li><a href="#">Links</a></li>
			<li><a href="#">Contact</a></li>
		</ul>
	</div>
	<!-- end #menu -->
	<div id="page">
		<div id="page-bgtop">
			<div id="page-bgbtm">
				<div id="content">
					<div id="gallery-wrapper">
						<div id="gallery">
                            <div id="target-container" style="padding: 10px">
				<canvas id="image_container"
			>
				</canvas>
                            </div>
                            <div id="thumbnail-bg">
								<ul class="thumbnails">
									<li><img id="img1" class="active" src="images/img04.jpg" title="Monument Valley" alt="" width="604" height="375" onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.4" /></li>
									<li><img id="img2" src="images/img05.jpg" title="Honey Bee" alt="" width="100" height="75"  onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.4" /></li>
									<li><img id="img3" src="images/img06.jpg" title="Cup of Coffee" alt="" width="100" height="75"  onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.4" /></li>
									<li><img id="img4" src="images/img07.jpg" title="Grand Tetons" alt="" width="100" height="75"  onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.4" /></li>
								</ul>
							</div>
							<br class="clear" />
						</div>
						<!-- end -->
					</div>
					<div style="clear: both;">&nbsp;</div>
				</div>
				<!-- end #content -->
				<div id="sidebar">
<div id="__div1">
            <table border="0" >
        <tr  height = "40px"   style="vertical-align:top">
<div id="__div2">
				<input id="preset_apply"
						type="button" 
						name="preset_apply" 
						value="Apply Stack" 
					>
				</input>
</div>
</tr><tr style="vertical-align:top">
<div id="toolbox">
            <h3><a href="#">Brightness and Constrast</a></h3>
<div id="__div3">
				<label id="__label1"
			>
					Level
				</label>
<br/>
<br/>
				<div id="brightness"
			>
				</div>
<br/>
				<label id="__label2"
			>
					Constrast
				</label>
<br/>
<br/>
				<div id="constrast"
			>
				</div>
</div>
            <h3><a href="#">Noise</a></h3>
<div id="__div4">
				<label id="__label3"
			>
					Amount
				</label>
<br/>
<br/>
				<div id="noise"
			>
				</div>
<br/>
				<label id="__label4"
			>
					Density
				</label>
<br/>
<br/>
				<div id="density"
			>
				</div>
<br/>
            <div id="mono">
        <input id="mono_input" type="checkbox" name="__div4"/>
        <label id="mono_label" for="mono_input"> Mono </label>
            </div>
</div>
            <h3><a href="#">Sepia</a></h3>
<div id="__div5">
				<label id="__label5"
			>
					Amount
				</label>
<br/>
<br/>
				<div id="sepia"
			>
				</div>
<br/>
            <div id="sepia_enabled">
        <input id="sepia_enabled_input" type="checkbox" name="__div5"/>
        <label id="sepia_enabled_label" for="sepia_enabled_input"> Enabled </label>
            </div>
</div>
            <h3><a href="#">Oil Painting</a></h3>
<div id="__div6">
				<label id="__label6"
			>
					Range
				</label>
<br/>
<br/>
				<div id="range"
			>
				</div>
</div>
</div>
</tr>
            </table>
        </div>
				</div>
				<!-- end #sidebar -->
				<div style="clear: both;">&nbsp;</div>
			</div>
		</div>
	</div>
	<!-- end #page -->
</div>
<div id="footer">
	<p>Copyright (c) 2012 Sitename.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/">Free CSS Templates</a>.</p>
</div>
<!-- end #footer -->
            <script type="text/javascript" src="../js/resig.js"></script>
            <script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>
            <script type="text/javascript" src="../js/jquery-ui-1.8.18.custom.min.js"></script>
            <script type="text/javascript" src="../js/jquery-idiom.js"></script>
            <link rel="stylesheet" href="../css/ui-lightness/jquery-ui-1.8.18.custom.css"></link>
            <script type="text/javascript" src="../js/jsmanipulate/jsmanipulate.js"></script>
            <script type="text/javascript" src="../js/jsmanipulate/jsm-manager.js"></script>
            <script type="text/javascript" src="../js/jsmanipulate/jsm-utils.js"></script>
<style>
#__div2 {height : 40px}
#toolbox {height : 360px}
#image_container {width : 605px;height : 375px}
</style>
<script type="text/javascript">
        var application = {};
			var __div1 = $("#__div1");
			var __div2 = $("#__div2");
			var preset_apply = $("#preset_apply").button();
			var toolbox = $("#toolbox");
			var __div3 = $("#__div3");
			var __label1 = $("#__label1");
			var __br1 = $("#__br1");
			var __br2 = $("#__br2");
			var brightness = $("#brightness");
			var __br3 = $("#__br3");
			var __label2 = $("#__label2");
			var __br4 = $("#__br4");
			var __br5 = $("#__br5");
			var constrast = $("#constrast");
			var __div4 = $("#__div4");
			var __label3 = $("#__label3");
			var __br6 = $("#__br6");
			var __br7 = $("#__br7");
			var noise = $("#noise");
			var __br8 = $("#__br8");
			var __label4 = $("#__label4");
			var __br9 = $("#__br9");
			var __br10 = $("#__br10");
			var density = $("#density");
			var __br11 = $("#__br11");
			var mono = $("#mono").button();
			var __div5 = $("#__div5");
			var __label5 = $("#__label5");
			var __br12 = $("#__br12");
			var __br13 = $("#__br13");
			var sepia = $("#sepia");
			var __br14 = $("#__br14");
			var sepia_enabled = $("#sepia_enabled").button();
			var __div6 = $("#__div6");
			var __label6 = $("#__label6");
			var __br15 = $("#__br15");
			var __br16 = $("#__br16");
			var range = $("#range");
			var image_container = $("#image_container");
		    preset_apply.click( function() { 
			var to_transform = application.image_data;
JQUComponent.set_enabled(preset_apply, false);
preset_apply.attr("value", "Applying...");
var __worker1 = new Worker('__asynch1.js');
__worker1.onmessage = function(message) {
if (message.data.id == '__wwmsg1') {
var result = message.data.result;application.set_image_data(result);
JQUComponent.set_enabled(preset_apply, true);
preset_apply.attr("value", "Apply Stack");
}
}
__worker1.postMessage({mypreset : transformer,image : to_transform,});
		});
            toolbox.accordion({
                fillSpace: true,
		    change: function(event, ui) { 
	     if (application.current_image)
{
application.set_image(application.current_image);
application.apply_filter();
}
		    },
	    });
            brightness.slider({
                min: -100,
                max: 100,
                value: 0,
		    change: function(event, ui) { 
	     transformer.b_filter.set_amount(brightness.slider( "option", "value" ) / 100);
application.apply_filter();
		    },
	    });
            constrast.slider({
                min: 0,
                max: 200,
                value: 100,
		    change: function(event, ui) { 
	     transformer.c_filter.set_amount(constrast.slider( "option", "value" ) / 100);
application.apply_filter();
		    },
	    });
            noise.slider({
                min: 0,
                max: 100,
                value: 0,
		    change: function(event, ui) { 
	     transformer.n_filter.set_amount(noise.slider( "option", "value" ));
application.apply_filter();
		    },
	    });
            density.slider({
                min: 0,
                max: 100,
                value: 0,
		    change: function(event, ui) { 
	     transformer.n_filter.set_density(density.slider( "option", "value" ) / 100);
application.apply_filter();
		    },
	    });
		    mono.change( function() { 
			transformer.n_filter.set_monochrome(JQUCheckbox.get_checked(mono));
application.apply_filter();
		});
mono.__input = "#mono_input";
mono.__label = "#mono_label";
					JQUComponent.set_enabled(sepia, false);
            sepia.slider({
                min: 0,
                max: 30,
                value: 0,
		    change: function(event, ui) { 
	     transformer.s_filter.set_amount(sepia.slider( "option", "value" ));
application.apply_filter();
		    },
	    });
		    sepia_enabled.change( function() { 
			transformer.s_filter.set_enabled(JQUCheckbox.get_checked(sepia_enabled));
		});
sepia_enabled.__input = "#sepia_enabled_input";
sepia_enabled.__label = "#sepia_enabled_label";
            range.slider({
                min: 0,
                max: 5,
                value: 0,
		    change: function(event, ui) { 
	     transformer.o_filter.set_range(range.slider( "option", "value" ));
application.apply_filter();
		    },
	    });
            application.current_image = null;
            application.image_data = null;
	application.get_image_data = function() 
	{
		var target = document.getElementById("image_container");
var context = target.getContext("2d");
return context.getImageData(0, 0, target.width, target.height);
	};
	application.set_image_data = function(data) 
	{
		var target = document.getElementById("image_container");
var context = target.getContext("2d");
context.putImageData(data, 0, 0);
	};
	application.set_image = function(id) 
	{
		application.current_image = id;
var image = document.getElementById(id);
var target = document.getElementById("image_container");
var context = target.getContext("2d");
context.drawImage(image, 0, 0, target.width, target.height);
application.image_data = application.get_image_data();
	};
	application.apply_filter = function() 
	{
		application.set_image_data(application.image_data);
var imgdata = application.get_image_data();
if (toolbox.accordion("option", "active") > 0)
{
var filter = transformer.filters[toolbox.accordion("option", "active") + 1];
filter.applyToImage(imgdata);
}
else
{
transformer.b_filter.applyToImage(imgdata);
transformer.c_filter.applyToImage(imgdata);
}
application.set_image_data(imgdata);
	};
		application.init = function() { 
        //some jquery, to lighten the mood
        $("#img1").click(function() { application.set_image("img1"); });
        $("#img2").click(function() { application.set_image("img2"); });
        $("#img3").click(function() { application.set_image("img3"); });
        $("#img4").click(function() { application.set_image("img4"); });
			application.set_image("img2");
//some jquery, to lighten the mood
        $("#img1").click(function() { application.set_image("img1"); });
        $("#img2").click(function() { application.set_image("img2"); });
        $("#img3").click(function() { application.set_image("img3"); });
        $("#img4").click(function() { application.set_image("img4"); });
		}
	    var transformer = new jsmanip.Preset() ;
			transformer.b_filter = new jsmanip.Brightness(
		0,transformer);		
		if(!transformer.filters)
			transformer.filters = [];
		transformer.filters.push(transformer.b_filter);
			transformer.c_filter = new jsmanip.Contrast(
		1,transformer);		
		if(!transformer.filters)
			transformer.filters = [];
		transformer.filters.push(transformer.c_filter);
			transformer.n_filter = new jsmanip.Noise(
		null,null,null,transformer);		
		if(!transformer.filters)
			transformer.filters = [];
		transformer.filters.push(transformer.n_filter);
			transformer.s_filter = new jsmanip.Sepia(
		0,transformer);		
		if(!transformer.filters)
			transformer.filters = [];
		transformer.filters.push(transformer.s_filter);
            transformer.s_filter.set_enabled(0);
			transformer.o_filter = new jsmanip.Oil(
		0,transformer);		
		if(!transformer.filters)
			transformer.filters = [];
		transformer.filters.push(transformer.o_filter);
                    if (application.init)
                        application.init();
</script>
</body>
</html>
